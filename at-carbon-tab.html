<link rel="import" href="../tangere/tangere.html">
<link rel="import" href="../layout/layout.html">
<link rel="import" href="../at-carbon-badge/at-carbon-badge.html">

<dom-module id="at-carbon-tab">
  <template>
    <style>
       :host {
        display: block;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
        padding: 0 12px;
        cursor: default;
      }

      :host(.scrollable) {
        display: -ms-inline-flexbox;
        display: -webkit-inline-flex;
        display: inline-flex;
      }

       :host([link]) {
        padding: 0;
      }

      .tab-content {
        height: 100%;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        transition: opacity 0.1s cubic-bezier(0.4, 0.0, 1, 1);
      }

       :host(:not(.iron-selected))>.tab-content {
        opacity: 0.6;
      }

      #ink {
        color: #ffff8d;
        pointer-events: none;
      }

      .tab-content> ::content > a {
        height: 100%;
        /* flex */
        -ms-flex: 1 1 0.000000001px;
        -webkit-flex: 1;
        flex: 1;
        -webkit-flex-basis: 0.000000001px;
        flex-basis: 0.000000001px;
      }

      .tab-content> ::content {
        cursor: pointer;
      }
    </style>

    <div id="container" class="tab-content flex auto center-center horizontal layout">
      <div id="inner">
        <div hidden$="[[_computeLabelHidden(label)]]">[[label]]</div>
        <div hidden$="[[_computeInnerHTMLHidden(label)]]">
          <content></content>
        </div>
      </div>
      <at-carbon-badge id="badge" for="inner" label="[[badgeLabel]]" color="[[badgeColor]]" x-offset="6"></at-carbon-badge>
    </div>

  </template>

</dom-module>

<script>
  Polymer({

    is: 'at-carbon-tab',

    properties: {
      label: {
        type: String,
        value: ''
      },
      badgeLabel: {
        type: String,
        value: ''
      },
      badgeColor: {
        type: String,
        value: ''
      }
      
    },

    _computeLabelHidden: function (label) {
      this.async(function () {
        this.$.badge.updatePosition();
      }, 10);
      var result = !label;
      return result;
    },

    _computeInnerHTMLHidden: function(label) {
      var result = !!label;
      return result;
    }
  });
</script>
