<link rel="import" href="../tangere/tangere.html">
<link rel="import" href="../at-carbon-badge/at-carbon-badge.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">

<dom-module id="at-carbon-tab">
  <template>
    <style>
       :host {
        display: inline-block;
        padding: 0 12px;
        cursor: default;
      }

      :host(.scrollable) {
        height: 100%;
      }

      :host([link]) {
        padding: 0;
      }

      :host([disabled]) {
        @apply --at-form-disabled;
      }

      .tab-content {
        height: 100%;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        transition: opacity 0.1s cubic-bezier(0.4, 0.0, 1, 1);
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
      }

       :host(:not(.iron-selected))>.tab-content {
        opacity: 0.6;
      }

      #ink {
        color: #ffff8d;
        pointer-events: none;
      }

      .tab-content> ::content > a {
        height: 100%;
        @apply --layout-flex;
      }

      .tab-content> ::content {
        cursor: pointer;
      }

      .tab-content> ::slotted(a) {
        height: 100%;
        @apply --layout-flex;
      }

      .tab-content ::slotted(*) {
        cursor: pointer;
      }

      .cursor-pointer {
        cursor: pointer;
      }
    </style>

    <div id="container" class$="tab-content [[_computeAdditionalClasses(label)]]">
      <div id="inner">
        <div hidden$="[[_computeLabelHidden(label)]]">[[label]]</div>
        <div hidden$="[[_computeInnerHTMLHidden(label)]]">
          <slot></slot>
        </div>
      </div>
      <at-carbon-badge id="badge" for="inner" label="[[badgeLabel]]" color="[[badgeColor]]" x-offset="6"></at-carbon-badge>
    </div>

  </template>

</dom-module>

<script>
  Polymer({

    is: 'at-carbon-tab',

    properties: {
      label: {
        type: String,
        value: ''
      },
      badgeLabel: {
        type: String,
        value: ''
      },
      badgeColor: {
        type: String,
        value: ''
      }

    },

    _computeLabelHidden: function (label) {
      this.async(function () {
        this.$.badge.updatePosition();
      }, 10);
      var result = !label;
      return result;
    },

    _computeInnerHTMLHidden: function(label) {
      var result = !!label;
      return result;
    },

    _computeAdditionalClasses: function(label) {
      if (label.length > 0) return "cursor-pointer";
      return "";
    }
  });
</script>
